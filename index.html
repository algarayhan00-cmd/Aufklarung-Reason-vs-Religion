<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Philosopher Dialogue Simulator ‚Äî Aufkl√§rung</title>
  <style>
    :root { --gold:#cfa76b; --accent:#4b5538; --muted:#6a6a6a; }
    * { box-sizing:border-box; }
    html, body { height:100%; margin:0; scroll-behavior:smooth; } /* üî• Smooth scroll aktif di seluruh halaman */
    body { font-family:Georgia, 'Times New Roman', serif; background:#0f0c08; color:#fff; overflow:hidden; }

    .immersive { display:grid; grid-template-columns:45% 55%; height:100vh; }

    .gallery { position:relative; display:flex; align-items:center; justify-content:center; background:#000; }
    .frame { width:86%; height:86%; position:relative; border:14px solid var(--gold); border-radius:12px; overflow:hidden; box-shadow:0 30px 80px rgba(0,0,0,0.6); }
    .portrait-img { width:100%; height:100%; object-fit:cover; filter:brightness(0.98) contrast(1.03); transition:opacity 0.5s ease; }
    .canvas-caption { position:absolute; bottom:6%; left:50%; transform:translateX(-50%); text-align:center; background:rgba(0,0,0,0.55); padding:12px 18px; border-radius:8px; backdrop-filter:blur(4px); }
    .canvas-caption h2 { margin:0; color:var(--gold); font-size:1.4rem; }
    .canvas-caption p { margin:4px 0 0; font-size:0.95rem; color:#f0e5c4; }

    .controls { position:absolute; bottom:16px; left:16px; display:flex; gap:8px; }
    .ctrl-btn { background:rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.15); color:#fff; padding:10px 14px; border-radius:8px; cursor:pointer; }

    .panel { background:linear-gradient(180deg,#f8f6f1 0,#efe9dd 100%); color:#1d1d1d; padding:40px; overflow-y:auto; max-height:100vh; scroll-behavior:smooth; } /* üî• Scroll lembut di panel */
    .meta { display:flex; align-items:center; gap:14px; margin-bottom:20px; }
    .mini-portrait { width:60px; height:80px; border-radius:8px; object-fit:cover; box-shadow:0 6px 16px rgba(0,0,0,0.15); }
    .title { font-size:24px; margin:0; font-family:Georgia; }
    .subtitle { color:var(--muted); font-size:0.95rem; }

    .dialog { background:#fff; border-radius:12px; padding:20px; box-shadow:0 8px 20px rgba(0,0,0,0.08); }
    .question { font-size:1.1rem; margin-bottom:14px; }
    .choices { display:flex; flex-direction:column; gap:12px; }
    .choice { padding:12px; border-radius:8px; border:1px solid rgba(0,0,0,0.08); cursor:pointer; background:linear-gradient(180deg,#fff,#f8f5ee); font-weight:600; transition:all 0.2s ease; }
    .choice:hover { transform:translateY(-4px); box-shadow:0 10px 20px rgba(0,0,0,0.08); }

    .progress { margin-top:16px; color:var(--muted); font-size:0.95rem; }
    .result-overlay { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,0.7); z-index:99; }
    .result-card { background:#fff; color:#111; border-radius:12px; padding:30px; max-width:600px; text-align:center; box-shadow:0 10px 30px rgba(0,0,0,0.3); }
    .result-card h2 { margin-top:0; color:#7a5c2f; }
    .restart-btn { padding:10px 14px; border:none; border-radius:8px; background:var(--gold); color:#fff; cursor:pointer; margin-top:16px; }

    /* === Tambahan: perbaikan tampilan mobile + smooth scroll === */
    @media (max-width:900px) {
      body { overflow:auto; }
      .immersive { grid-template-columns:1fr; grid-auto-rows:auto; height:auto; }
      .gallery { height:60vh; }
      .panel { padding:20px; max-height:none; overflow-y:visible; scroll-behavior:smooth; }
      .dialog { font-size:1rem; }
      .choice { font-size:1rem; }
    }
  </style>
</head>
<body>
  <audio id="bgMusic" loop autoplay>
    <source src="audio/descartes.wav" type="audio/wav">
  </audio>

  <div class="immersive">
    <div class="gallery">
      <div class="frame">
        <img id="mainPortrait" class="portrait-img" src="images/descartes.jpg" alt="Portrait" />
        <div class="canvas-caption">
          <h2 id="canvasName">Ren√© Descartes</h2>
          <p id="canvasQuote">"Cogito, ergo sum"</p>
        </div>
        <div class="controls">
          <button id="prevBtn" class="ctrl-btn">‚ü® Prev</button>
          <button id="nextBtn" class="ctrl-btn">Next ‚ü©</button>
        </div>
      </div>
    </div>

    <div class="panel">
      <div class="meta">
        <img id="miniPortrait" class="mini-portrait" src="images/descartes.jpg" />
        <div>
          <h3 class="title">Philosopher Dialogue Simulator</h3>
          <div class="subtitle">Aufkl√§rung ‚Äî Reason vs Faith</div>
        </div>
      </div>

      <div class="dialog">
        <div class="question" id="question">Ren√© Descartes menatapmu tajam. ‚ÄúMenurutmu, kebenaran berasal dari mana?‚Äù</div>
        <div class="choices" id="choices"></div>
        <div class="progress" id="progress">Scene 1 / 5</div>
      </div>
    </div>
  </div>

  <div class="result-overlay" id="resultOverlay">
    <div class="result-card">
      <h2 id="resultTitle">Hasil</h2>
      <p id="resultDesc"></p>
      <button class="restart-btn" id="restartBtn">Main Lagi</button>
    </div>
  </div>

  <script>
    const gallery = [
      {img:'images/descartes.jpg', name:'Ren√© Descartes', quote:'"Cogito, ergo sum"', music:'audio/descartes.wav',
        text:'Ren√© Descartes menatapmu tajam. ‚ÄúMenurutmu, kebenaran berasal dari mana?‚Äù',
        choices:[{text:'Dari kemampuan manusia berpikir.',reason:1},{text:'Dari wahyu dan kepercayaan pada Tuhan.',religious:1}]},
      {img:'images/locke.jpg', name:'John Locke', quote:'"Reason must be our last judge and guide in everything."', music:'audio/locke.wav',
        text:'John Locke berkata, ‚ÄúPengalaman membentuk pengetahuan kita. Kamu setuju?‚Äù',
        choices:[{text:'Ya, semua berasal dari pengalaman manusia.',reason:1},{text:'Tidak, pengetahuan sejati datang dari iman.',religious:1}]},
      {img:'images/voltaire.jpg', name:'Voltaire', quote:'"Those who can make you believe absurdities can make you commit atrocities."', music:'audio/voltaire.wav',
        text:'Voltaire tersenyum sinis. ‚ÄúAgama sering mengekang pikiran. Apa pendapatmu?‚Äù',
        choices:[{text:'Kita harus bebas berpikir tanpa batasan agama.',reason:1},{text:'Agama tetap dibutuhkan sebagai panduan moral.',religious:1}]},
      {img:'images/pascal.jpg', name:'Blaise Pascal', quote:'"The heart has its reasons which reason knows nothing of."', music:'audio/pascal.wav',
        text:'Blaise Pascal menunduk. ‚ÄúAkal manusia terbatas. Percaya pada Tuhan lebih penting.‚Äù',
        choices:[{text:'Benar, hati memiliki alasannya sendiri.',religious:1},{text:'Tidak, akal adalah alat utama memahami dunia.',reason:1}]},
      {img:'images/kant.jpg', name:'Immanuel Kant', quote:'"Dare to know! Have the courage to use your own understanding."', music:'audio/kant.wav',
        text:'Immanuel Kant menatapmu penuh harap. ‚ÄúBeranilah berpikir sendiri. Sapere Aude!‚Äù',
        choices:[{text:'Aku akan berpikir dengan kebebasan.',reason:1},{text:'Namun aku tetap berpegang pada iman.',religious:1}]}
    ];

    let index = 0, reasonScore = 0, religScore = 0;
    const mainPortrait = document.getElementById('mainPortrait');
    const miniPortrait = document.getElementById('miniPortrait');
    const canvasName = document.getElementById('canvasName');
    const canvasQuote = document.getElementById('canvasQuote');
    const question = document.getElementById('question');
    const choicesEl = document.getElementById('choices');
    const progress = document.getElementById('progress');
    const resultOverlay = document.getElementById('resultOverlay');
    const resultTitle = document.getElementById('resultTitle');
    const resultDesc = document.getElementById('resultDesc');
    const restartBtn = document.getElementById('restartBtn');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const bgMusic = document.getElementById('bgMusic');

    function render(i){
      const s = gallery[i];
      mainPortrait.style.opacity = 0;
      setTimeout(()=>{
        mainPortrait.src = s.img;
        miniPortrait.src = s.img;
        canvasName.textContent = s.name;
        canvasQuote.textContent = s.quote;
        question.textContent = s.text;
        progress.textContent = `Scene ${i+1} / ${gallery.length}`;
        choicesEl.innerHTML = '';
        s.choices.forEach(c=>{
          const btn=document.createElement('div');
          btn.className='choice';
          btn.textContent=c.text;
          btn.onclick=()=>selectChoice(c);
          choicesEl.appendChild(btn);
        });
        bgMusic.src = s.music;
        bgMusic.play().catch(()=>{});
        mainPortrait.style.opacity = 1;
        document.querySelector('.panel').scrollTo({ top: 0, behavior: 'smooth' }); // üî• Auto scroll ke atas tiap scene
      },200);
    }

    function selectChoice(choice){
      if(choice.reason) reasonScore++;
      if(choice.religious) religScore++;
      index++;
      if(index < gallery.length) render(index);
      else finish();
    }

    function finish(){
      const total = reasonScore + religScore || 1;
      const rPct = Math.round((reasonScore / total) * 100);
      const gPct = Math.round((religScore / total) * 100);
      let title='', desc='';
      if(rPct > gPct + 10){ title='Filsuf Rasional'; desc=`Kamu condong pada akal dan rasio ‚Äî percaya pada eksperimen dan kritik terhadap dogma. (${rPct}% vs ${gPct}%).`; }
      else if(gPct > rPct + 10){ title='Pemikir Religius'; desc=`Kamu condong pada iman dan tradisi ‚Äî menempatkan wahyu sebagai sumber kebenaran. (${rPct}% vs ${gPct}%).`; }
      else { title='Pemikir Seimbang'; desc=`Kamu menggabungkan akal dan iman secara seimbang dalam memahami dunia. (${rPct}% vs ${gPct}%).`; }
      resultTitle.textContent = title;
      resultDesc.textContent = desc;
      resultOverlay.style.display = 'flex';
    }

    restartBtn.onclick = ()=>location.reload();
    prevBtn.onclick = ()=>{ if(index>0){ index--; render(index); } };
    nextBtn.onclick = ()=>{ if(index<gallery.length-1){ index++; render(index); } };

    render(0);
  </script>
</body>
</html>

